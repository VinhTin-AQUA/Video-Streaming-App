<header
    class="w-full flex items-center justify-between p-4 shadow shadow-rose-300 bg-black"
>
    <!-- Logo -->
    <div class="flex items-center space-x-2">
        <img src="logo.jpg" alt="Logo" class="h-12 w-12 rounded-full" />
        <span class="text-xl font-bold text-white">Video Streaming App</span>
    </div>

    <!-- Search bar -->
    <div class="flex-1 mx-8 max-w-[800px]">
        <div
            class="flex justify-start items-center gap-2 border border-rose-200 rounded-full focus-within:ring-1 focus-within:ring-rose-300 focus-within:border-rose-500 px-2 transition"
        >
            <input
                [(ngModel)]="searchString"
                type="text"
                placeholder="Search..."
                class="w-full px-4 py-2 outline-none text-white"
            />
            <button
                (click)="onSearch()"
                type="button"
                class="hover:text-rose-500"
            >
                <!-- Icon kính lúp (Heroicons) -->
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="size-6 text-white"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
                    />
                </svg>
            </button>
        </div>
    </div>

    <!-- Account button + context menu -->
    <div class="flex item-centers justify-start gap-2">
        <a
            routerLink="/home/upload"
            class="flex items-center text-white space-x-2 px-1 py-1 transition rounded-full hover:bg-rose-100 hover:text-rose-700"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-8"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                />
            </svg>
        </a>

        <div
            class="relative"
            appClickOutside
            (appClickOutside)="menuOpen = false"
        >
            <button
                (click)="toggleMenu()"
                class="flex items-center space-x-2 text-white px-3 py-1 rounded transition hover:bg-rose-100 hover:text-rose-700"
            >
                <img [src]="userStore.avatarUrl()" alt="Avatar" class="h-8 w-8 rounded-full" />
                <span class="font-medium">{{userStore.fullName()}}</span>
            </button>

            @if(menuOpen) {
            <div
                class="absolute right-0 mt-2 w-48 bg-white rounded shadow-sm shadow-rose-100 animate-slide-down"
                @slideDown
            >
                <a
                    routerLink="/user/info"
                    class="block w-full px-4 py-2 text-left hover:bg-gray-100"
                >
                    Profile
                </a>
                <button
                    (click)="logout()"
                    class="w-full px-4 py-2 text-left hover:bg-gray-100"
                >
                    Logout
                </button>
            </div>
            }
        </div>
    </div>
</header>
